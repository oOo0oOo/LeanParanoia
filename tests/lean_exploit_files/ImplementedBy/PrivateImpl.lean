-- Private implemented_by bypasses checks if using Name.isInternal
private unsafe def privateWrongAddImpl (n m : Nat) : Nat := n + m + 1

@[implemented_by privateWrongAddImpl]
private def privateAdd (n m : Nat) : Nat := n + m

def publicAdd (n m : Nat) : Nat := privateAdd n m

-- At runtime, this evaluates to 3 (via unsafe impl)
axiom exploit_axiom : publicAdd 1 1 = 3

theorem exploit_theorem : 1 + 1 = 3 := exploit_axiom
